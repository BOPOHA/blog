<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Github Action Tips - No.Try not. Do… or do not. There is no try.</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="how to debug events
- name: debig GitHub context
  env:
    GITHUB_CONTEXT: ${{ toJson(github) }}
  run: |
    echo &#34;$GITHUB_CONTEXT&#34;
- name: debig GitHub context
  run: cat /home/runner/work/_temp/_github_workflow/event.json
how to run build steps with own custom container
Sometimes you have to run integration tests with own container
which contains all devel-dependecies you need.
Something crazy like this:
name: Pull Request Workflow
on:
  ...

env:
  ...

jobs:
  own-container-jobs:
    runs-on: ubuntu-latest
    container: docker.io/yourpublicaccount/builder-container:1.0.0
    services:
      postgres:
        ...
      redis:
        ...

    steps:
      - name: Check out repository code
        uses: actions/checkout@v2

      - uses: actions/cache@v2
        with:
          path: ~/.cache/pip
          key: ${{ runner.os }}-pip-${{ hashFiles('*/requirements/path.txt') }}

      - name: Build seed VENV
        run: |
          # export PATH needs only if we have to build Psycopg2
          # Psycopg2 uses pg_config to find the libraries at build time
          export PATH=/usr/pgsql-10/bin:$PATH
          cd seed_dir
          python3.6 -m venv venv
          ./venv/bin/pip install -r requirements/path.txt

      - name: Seed DB
        run: |
          cd seed_dir
          ./venv/bin/python ...
          ./venv/bin/alembic ...

      - name: Build work VENV
        run: |
          cd work_dir
          python3.8 -m venv venv
          ./venv/bin/pip install -r requirements/path.txt

      - name: Run tests
        run: |
          cd work_dir
          ./venv/bin/pytest -v
If your contaner runs as a non-root user, you need to add some github-related things.
See comments bellow."><meta property="og:image" content="https://blog.vorona.me/"><meta property="og:url" content="https://blog.vorona.me/posts/2022-05-30-github-action-tips/"><meta property="og:site_name" content="No.Try not. Do… or do not. There is no try."><meta property="og:title" content="Github Action Tips"><meta property="og:description" content="how to debug events - name: debig GitHub context env: GITHUB_CONTEXT: ${{ toJson(github) }} run: | echo &#34;$GITHUB_CONTEXT&#34; - name: debig GitHub context run: cat /home/runner/work/_temp/_github_workflow/event.json how to run build steps with own custom container Sometimes you have to run integration tests with own container which contains all devel-dependecies you need. Something crazy like this:
name: Pull Request Workflow on: ... env: ... jobs: own-container-jobs: runs-on: ubuntu-latest container: docker.io/yourpublicaccount/builder-container:1.0.0 services: postgres: ... redis: ... steps: - name: Check out repository code uses: actions/checkout@v2 - uses: actions/cache@v2 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('*/requirements/path.txt') }} - name: Build seed VENV run: | # export PATH needs only if we have to build Psycopg2 # Psycopg2 uses pg_config to find the libraries at build time export PATH=/usr/pgsql-10/bin:$PATH cd seed_dir python3.6 -m venv venv ./venv/bin/pip install -r requirements/path.txt - name: Seed DB run: | cd seed_dir ./venv/bin/python ... ./venv/bin/alembic ... - name: Build work VENV run: | cd work_dir python3.8 -m venv venv ./venv/bin/pip install -r requirements/path.txt - name: Run tests run: | cd work_dir ./venv/bin/pytest -v If your contaner runs as a non-root user, you need to add some github-related things. See comments bellow."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-30T10:00:25+02:00"><meta property="article:modified_time" content="2022-05-30T10:00:25+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Github Action Tips"><meta name=twitter:description content="how to debug events - name: debig GitHub context env: GITHUB_CONTEXT: ${{ toJson(github) }} run: | echo &#34;$GITHUB_CONTEXT&#34; - name: debig GitHub context run: cat /home/runner/work/_temp/_github_workflow/event.json how to run build steps with own custom container Sometimes you have to run integration tests with own container which contains all devel-dependecies you need. Something crazy like this:
name: Pull Request Workflow on: ... env: ... jobs: own-container-jobs: runs-on: ubuntu-latest container: docker.io/yourpublicaccount/builder-container:1.0.0 services: postgres: ... redis: ... steps: - name: Check out repository code uses: actions/checkout@v2 - uses: actions/cache@v2 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('*/requirements/path.txt') }} - name: Build seed VENV run: | # export PATH needs only if we have to build Psycopg2 # Psycopg2 uses pg_config to find the libraries at build time export PATH=/usr/pgsql-10/bin:$PATH cd seed_dir python3.6 -m venv venv ./venv/bin/pip install -r requirements/path.txt - name: Seed DB run: | cd seed_dir ./venv/bin/python ... ./venv/bin/alembic ... - name: Build work VENV run: | cd work_dir python3.8 -m venv venv ./venv/bin/pip install -r requirements/path.txt - name: Run tests run: | cd work_dir ./venv/bin/pytest -v If your contaner runs as a non-root user, you need to add some github-related things. See comments bellow."><link href=https://blog.vorona.me/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://blog.vorona.me/css/main.a87126a5d38398207e58225b2d1a9faf97f546982f44b3ffb9715a264da36c90.css></head><body><div class=content><header><div class=main><a href=https://blog.vorona.me/>No.Try not. Do… or do not. There is no try.</a></div><nav><a href=https://blog.vorona.me/>Home</a>
<a href=https://blog.vorona.me/posts/>All posts</a>
<a href=https://blog.vorona.me/tags/>Tags</a></nav></header><main><article><div class=post-container><div class=post-content><div class=title><h1 class=title>Github Action Tips</h1><div class=meta>Posted on May 30, 2022</div></div><section class=body><h1 id=how-to-debug-events>how to debug events</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>debig GitHub context</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>GITHUB_CONTEXT</span>: <span style=color:#ae81ff>${{ toJson(github) }}</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    echo &#34;$GITHUB_CONTEXT&#34;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>debig GitHub context</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>run</span>: <span style=color:#ae81ff>cat /home/runner/work/_temp/_github_workflow/event.json</span>
</span></span></code></pre></div><h1 id=how-to-run-build-steps-with-own-custom-container>how to run build steps with own custom container</h1><p>Sometimes you have to run integration tests with own container
which contains all devel-dependecies you need.
Something crazy like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Pull Request Workflow</span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>own-container-jobs</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container</span>: <span style=color:#ae81ff>docker.io/yourpublicaccount/builder-container:1.0.0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>postgres</span>:
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>...</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>redis</span>:
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Check out repository code</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/cache@v2</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>path</span>: <span style=color:#ae81ff>~/.cache/pip</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>key</span>: <span style=color:#ae81ff>${{ runner.os }}-pip-${{ hashFiles(&#39;*/requirements/path.txt&#39;) }}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build seed VENV</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          # export PATH needs only if we have to build Psycopg2
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          # Psycopg2 uses pg_config to find the libraries at build time
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          export PATH=/usr/pgsql-10/bin:$PATH
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          cd seed_dir
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          python3.6 -m venv venv
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          ./venv/bin/pip install -r requirements/path.txt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Seed DB</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          cd seed_dir
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          ./venv/bin/python ...
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          ./venv/bin/alembic ...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build work VENV</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          cd work_dir
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          python3.8 -m venv venv
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          ./venv/bin/pip install -r requirements/path.txt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Run tests</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          cd work_dir
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          ./venv/bin/pytest -v</span>
</span></span></code></pre></div><p>If your contaner runs as a non-root user, you need to add some github-related things.
See comments bellow.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#66d9ef>ARG</span> CODE_VERSION<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span> <span style=color:#e6db74>docker.io/redhat/ubi8:latest</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ENV</span> CODE_VERSION<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>CODE_VERSION<span style=color:#e6db74>}</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> dnf install -y --setopt<span style=color:#f92672>=</span>install_weak_deps<span style=color:#f92672>=</span>False <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>        bzip2 bzip2-devel gcc-c++ git glibc-langpack-en <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>        libffi-devel libpq-devel libxml2-devel libxslt-devel <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>        python36-devel python38 python38-devel <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>        ... <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>        zlib-devel <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>        dnf clean all <span style=color:#f92672>&amp;&amp;</span> rm -rf /var/cache/dnf<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># RUN useradd -rm -d /github/home -s /bin/bash -g root -G sudo -u 1001 builder</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># We need non-root user with uid 1001</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Because github overrides HOME environ, and creates /github/home dir with uid 1001</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># - https://github.com/actions/runner/issues/863</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># - https://github.com/actions/runner/issues/1525</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> mkdir /github <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    groupadd --system --gid <span style=color:#ae81ff>1001</span> builder <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    useradd --system --create-home --home-dir /github/home --shell /bin/bash --uid <span style=color:#ae81ff>1001</span> --gid <span style=color:#ae81ff>1001</span> builder<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>USER</span> <span style=color:#e6db74>builder</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span> <span style=color:#e6db74>/github/home</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h1 id=how-to-add-simple-commit-message-checks-on-pr>how to add simple commit message checks on PR</h1><p>Easy, but wrong way:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>pull_request</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>pr-check1</span>:
</span></span><span style=display:flex><span>     <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>get log changes</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>id</span>: <span style=color:#ae81ff>get_log_changes</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># we need to cover the cases when commits contains merges from deployment branches:</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>#  Merge remote-tracking branch &#39;origin/deployment/QA...&#39; into feature/...</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>#  Merge branch &#39;deployment/QA...&#39; into feature/...</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          raw=$(git log ^origin/${{ github.base_ref }} origin/${{ github.head_ref }} --merges --oneline)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo ::set-output name=greps::$( echo &#34;$raw&#34; | grep &#34;Merge branch &#39;deploy\|Merge remote-tracking branch &#39;origin/deploy&#34; )
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo ::set-output name=count::$( echo &#34;$raw&#34; | grep &#34;Merge branch &#39;deploy\|Merge remote-tracking branch &#39;origin/deploy&#34; | wc -l )</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>debug outputs</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo ${{ steps.get_log_changes.outputs.greps }}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo ${{ steps.get_log_changes.outputs.count }}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>fail if count</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>if</span>: <span style=color:#ae81ff>${{ steps.get_log_changes.outputs.count != 0 }}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>exit 1</span>
</span></span></code></pre></div><p>Fastest and right way, using Github API:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>pull_request</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>pr-check1</span>:
</span></span><span style=display:flex><span>     <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>get commits and run checks</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># we need to cover the cases when commits contains merges from deployment branches:</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>#  Merge remote-tracking branch &#39;origin/deployment/QA...&#39; into feature/...</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>#  Merge branch &#39;deployment/QA...&#39; into feature/...</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>id</span>: <span style=color:#ae81ff>get_log_changes</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          jq --version
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          curl &#34;${{ github.event.pull_request._links.commits.href }}?per_page=250&#34; -s \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>             -H &#34;Accept: application/vnd.github.v3+json&#34; \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>             -H &#34;Authorization: Bearer ${{ github.token }}&#34; &gt; /tmp/commits.json
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          count=$(cat /tmp/commits.json | jq &#39;.[].commit.message&#39; | grep &#34;Merge branch &#39;deploy\|Merge remote-tracking branch &#39;origin/deploy&#34; | wc -l)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          echo ::set-output name=count::${count}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>fail if count is not zero</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>if</span>: <span style=color:#ae81ff>${{ steps.get_log_changes.outputs.count != 0 }}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>exit 1</span>
</span></span></code></pre></div></section><div class=post-tags></div></div></div></article></main><footer><div style=display:flex><a class=soc href rel=me title=github><svg class="feather"><use href="https://blog.vorona.me/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#%25!s%28%3cnil%3e%29"/></svg></a><a class=border></a><a class=soc href rel=me title=email><svg class="feather"><use href="https://blog.vorona.me/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#%25!s%28%3cnil%3e%29"/></svg></a><a class=border></a></div><div class=footer-info>2026 Copyright © 2020–2022, Anatolii Vorona; all rights reserved. | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script async src="https://www.googletagmanager.com/gtag/js?id=G-4NT8K1F5CV"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4NT8K1F5CV")}</script></div></body></html>