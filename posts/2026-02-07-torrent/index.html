<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Building a 4TB Video Storage Stack on Fedora (Transmission + SMB) - No.Try not. Do… or do not. There is no try.</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="I recently added a 4TB Seagate IronWolf HDD to my ThinkCentre Server to serve as a dedicated video storage and torrenting machine. To get the most out of the spinning rust, I needed a setup that minimizes fragmentation and network latency.
Here is the complete, non-interactive configuration guide for Fedora 43 Server, moving from a raw disk to a fully tuned streaming stack. All commands are executed as root.
The Hardware

Disk: Seagate IronWolf 4TB (SATA, 5400RPM)
OS: Fedora Linux 43 (Server Edition)
Mount Point: /srv/TORRENT


Step 1: Partitioning & Formatting
Since the drive is larger than 2TB, we must use GPT. We use sgdisk for non-interactive partitioning and mkfs.ext4 with specific flags to optimize for large video files."><meta property="og:image" content="https://blog.vorona.me/"><meta property="og:url" content="https://blog.vorona.me/posts/2026-02-07-torrent/"><meta property="og:site_name" content="No.Try not. Do… or do not. There is no try."><meta property="og:title" content="Building a 4TB Video Storage Stack on Fedora (Transmission + SMB)"><meta property="og:description" content="I recently added a 4TB Seagate IronWolf HDD to my ThinkCentre Server to serve as a dedicated video storage and torrenting machine. To get the most out of the spinning rust, I needed a setup that minimizes fragmentation and network latency.
Here is the complete, non-interactive configuration guide for Fedora 43 Server, moving from a raw disk to a fully tuned streaming stack. All commands are executed as root.
The Hardware Disk: Seagate IronWolf 4TB (SATA, 5400RPM) OS: Fedora Linux 43 (Server Edition) Mount Point: /srv/TORRENT Step 1: Partitioning & Formatting Since the drive is larger than 2TB, we must use GPT. We use sgdisk for non-interactive partitioning and mkfs.ext4 with specific flags to optimize for large video files."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-02-07T00:00:00+00:00"><meta property="article:modified_time" content="2026-02-07T00:00:00+00:00"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Fedora"><meta property="article:tag" content="Storage"><meta property="article:tag" content="Transmission"><meta property="article:tag" content="Samba"><meta name=twitter:card content="summary"><meta name=twitter:title content="Building a 4TB Video Storage Stack on Fedora (Transmission + SMB)"><meta name=twitter:description content="I recently added a 4TB Seagate IronWolf HDD to my ThinkCentre Server to serve as a dedicated video storage and torrenting machine. To get the most out of the spinning rust, I needed a setup that minimizes fragmentation and network latency.
Here is the complete, non-interactive configuration guide for Fedora 43 Server, moving from a raw disk to a fully tuned streaming stack. All commands are executed as root.
The Hardware Disk: Seagate IronWolf 4TB (SATA, 5400RPM) OS: Fedora Linux 43 (Server Edition) Mount Point: /srv/TORRENT Step 1: Partitioning & Formatting Since the drive is larger than 2TB, we must use GPT. We use sgdisk for non-interactive partitioning and mkfs.ext4 with specific flags to optimize for large video files."><link href=https://blog.vorona.me/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://blog.vorona.me/css/main.a87126a5d38398207e58225b2d1a9faf97f546982f44b3ffb9715a264da36c90.css></head><body><div class=content><header><div class=main><a href=https://blog.vorona.me/>No.Try not. Do… or do not. There is no try.</a></div><nav><a href=https://blog.vorona.me/>Home</a>
<a href=https://blog.vorona.me/posts/>All posts</a>
<a href=https://blog.vorona.me/tags/>Tags</a></nav></header><main><article><div class=post-container><div class=post-content><div class=title><h1 class=title>Building a 4TB Video Storage Stack on Fedora (Transmission + SMB)</h1><div class=meta>Posted on Feb 7, 2026</div></div><section class=body><p>I recently added a <strong>4TB Seagate IronWolf</strong> HDD to my ThinkCentre Server to serve as a dedicated video storage and torrenting machine. To get the most out of the spinning rust, I needed a setup that minimizes fragmentation and network latency.</p><p>Here is the complete, non-interactive configuration guide for <strong>Fedora 43 Server</strong>, moving from a raw disk to a fully tuned streaming stack. All commands are executed as <strong>root</strong>.</p><h2 id=the-hardware>The Hardware</h2><ul><li><strong>Disk:</strong> Seagate IronWolf 4TB (SATA, 5400RPM)</li><li><strong>OS:</strong> Fedora Linux 43 (Server Edition)</li><li><strong>Mount Point:</strong> <code>/srv/TORRENT</code></li></ul><hr><h3 id=step-1-partitioning--formatting>Step 1: Partitioning & Formatting</h3><p>Since the drive is larger than 2TB, we must use GPT. We use <code>sgdisk</code> for non-interactive partitioning and <code>mkfs.ext4</code> with specific flags to optimize for large video files.</p><p><strong>Key Flags:</strong></p><ul><li><code>-m 0</code>: Sets reserved blocks to 0% (reclaiming ~200GB of space usually reserved for root).</li><li><code>-T largefile4</code>: Reduces inode count, optimizing the filesystem structure for large files rather than millions of tiny ones.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 1. Wipe existing filesystem signatures to prevent conflicts</span>
</span></span><span style=display:flex><span>wipefs -a /dev/sdb
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2. Create a new GPT table with a single partition filling the disk</span>
</span></span><span style=display:flex><span><span style=color:#75715e># -n 1:0:0 (New partition 1, start default, end default)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># -t 1:8300 (Type Linux Filesystem)</span>
</span></span><span style=display:flex><span>sgdisk -n 1:0:0 -t <span style=color:#ae81ff>8300</span> /dev/sdb
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3. Inform the kernel of changes</span>
</span></span><span style=display:flex><span>partprobe /dev/sdb
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 4. Format with Large File optimization</span>
</span></span><span style=display:flex><span>mkfs.ext4 -m <span style=color:#ae81ff>0</span> -T largefile4 /dev/sdb1
</span></span></code></pre></div><hr><h3 id=step-2-persistent-mount>Step 2: Persistent Mount</h3><p>We mount the drive to <code>/srv/TORRENT</code> using its UUID to ensure it survives reboots and cable swaps.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 1. Create the mount point</span>
</span></span><span style=display:flex><span>mkdir -p /srv/TORRENT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2. Capture the UUID and append to fstab</span>
</span></span><span style=display:flex><span><span style=color:#75715e># We use &#39;noatime&#39; to prevent write-wear during reads</span>
</span></span><span style=display:flex><span>DISK_UUID<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>blkid -s UUID -o value /dev/sdb1<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;UUID=</span><span style=color:#e6db74>${</span>DISK_UUID<span style=color:#e6db74>}</span><span style=color:#e6db74> /srv/TORRENT ext4 defaults,noatime,lazytime,data=ordered 0 2&#34;</span> &gt;&gt; /etc/fstab
</span></span><span style=display:flex><span>systemctl daemon-reload
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3. Mount the drive</span>
</span></span><span style=display:flex><span>mount -a
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 4. FIX PERMISSIONS (Critical Step)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># By default, the mount point is owned by root. We must give it to transmission.</span>
</span></span><span style=display:flex><span>chown -R transmission:transmission /srv/TORRENT
</span></span><span style=display:flex><span>chmod <span style=color:#ae81ff>775</span> /srv/TORRENT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 5. Create directory structure</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Since we just changed ownership, these will be created as transmission:transmission</span>
</span></span><span style=display:flex><span>mkdir -p /srv/TORRENT/<span style=color:#f92672>{</span>inbox,new,family<span style=color:#f92672>}</span>
</span></span></code></pre></div><hr><h3 id=step-3-transmission-daemon-setup>Step 3: Transmission Daemon Setup</h3><p>We are using the system-wide <code>transmission-daemon</code>. By default, the configuration directory might be empty, so we will generate a full, optimized <code>settings.json</code> file.</p><p><strong>Optimizations:</strong></p><ul><li><code>preallocation: 2</code> (Full): Allocates full file space on download start. Essential to prevent fragmentation on HDDs.</li><li><code>cache-size-mb: 64</code>: Increases write cache to smooth out I/O spikes.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 1. Stop the service to allow config editing</span>
</span></span><span style=display:flex><span>systemctl stop transmission-daemon
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2. Ensure the configuration directory exists</span>
</span></span><span style=display:flex><span>mkdir -p /var/lib/transmission/.config/transmission-daemon/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3. Write the FULL optimized configuration</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Note: We change &#39;umask&#39; to 2 (002) to allow group write permissions for SMB</span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF &gt; /var/lib/transmission/.config/transmission-daemon/settings.json
</span></span></span><span style=display:flex><span><span style=color:#e6db74>{
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;alt-speed-down&#34;: 50,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;alt-speed-enabled&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;alt-speed-time-begin&#34;: 540,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;alt-speed-time-day&#34;: 127,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;alt-speed-time-enabled&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;alt-speed-time-end&#34;: 1020,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;alt-speed-up&#34;: 50,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;announce-ip&#34;: &#34;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;announce-ip-enabled&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;anti-brute-force-enabled&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;anti-brute-force-threshold&#34;: 100,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;bind-address-ipv4&#34;: &#34;0.0.0.0&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;bind-address-ipv6&#34;: &#34;::&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;blocklist-date&#34;: 0,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;blocklist-enabled&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;blocklist-updates-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;blocklist-url&#34;: &#34;[http://www.example.com/blocklist](http://www.example.com/blocklist)&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;cache-size-mb&#34;: 64,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;compact-view&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;default-trackers&#34;: &#34;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;dht-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;download-dir&#34;: &#34;/srv/TORRENT/new&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;download-queue-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;download-queue-size&#34;: 5,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;encryption&#34;: 1,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;idle-seeding-limit&#34;: 30,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;idle-seeding-limit-enabled&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;incomplete-dir&#34;: &#34;/srv/TORRENT/inbox&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;incomplete-dir-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;lpd-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;message-level&#34;: 2,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;peer-congestion-algorithm&#34;: &#34;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;peer-limit-global&#34;: 200,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;peer-limit-per-torrent&#34;: 50,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;peer-port&#34;: 51413,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;peer-port-random-high&#34;: 65535,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;peer-port-random-low&#34;: 49152,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;peer-port-random-on-start&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;peer-socket-tos&#34;: &#34;le&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;pex-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;port-forwarding-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;preallocation&#34;: 2,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;prefetch-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;queue-stalled-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;queue-stalled-minutes&#34;: 30,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;ratio-limit&#34;: 2,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;ratio-limit-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;rename-partial-files&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;rpc-authentication-required&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;rpc-bind-address&#34;: &#34;0.0.0.0&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;rpc-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;rpc-host-whitelist&#34;: &#34;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;rpc-host-whitelist-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;rpc-port&#34;: 9091,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;rpc-url&#34;: &#34;/transmission/&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;rpc-username&#34;: &#34;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;rpc-whitelist&#34;: &#34;0.0.0.0&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;rpc-whitelist-enabled&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;scrape-paused-torrents-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;script-torrent-done-enabled&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;script-torrent-done-filename&#34;: &#34;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;speed-limit-down&#34;: 100,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;speed-limit-down-enabled&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;speed-limit-up&#34;: 100,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;speed-limit-up-enabled&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;start-added-torrents&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;trash-original-torrent-files&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;umask&#34;: 2,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;upload-slots-per-torrent&#34;: 14,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;utp-enabled&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;watch-dir&#34;: &#34;/srv/TORRENT/inbox&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;watch-dir-enabled&#34;: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 4. Fix permissions</span>
</span></span><span style=display:flex><span><span style=color:#75715e># The system daemon runs as &#39;transmission&#39;, so it needs ownership of the config and data</span>
</span></span><span style=display:flex><span>chown -R transmission:transmission /var/lib/transmission
</span></span><span style=display:flex><span>chown -R transmission:transmission /srv/TORRENT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 5. Start the service</span>
</span></span><span style=display:flex><span>systemctl enable --now transmission-daemon
</span></span></code></pre></div><hr><h3 id=step-4-samba-smb-configuration>Step 4: Samba (SMB) Configuration</h3><p>We configure Samba to share the directory as <strong>Read-Only</strong>.</p><p><strong>Note:</strong> We set <code>force user = transmission</code> to ensure that you can access files created by the torrent client without permission errors.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 1. Backup existing config</span>
</span></span><span style=display:flex><span>cp /etc/samba/smb.conf /etc/samba/smb.conf.bak
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2. Append the Read-Only share definition</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Note: We use &#39;aio&#39; (Asynchronous I/O) settings to improve read performance for large files.</span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF &gt;&gt; /etc/samba/smb.conf
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>[VideoArchive]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   path = /srv/TORRENT
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   browseable = yes
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   read only = yes
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   guest ok = yes
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   force user = transmission
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   aio read size = 16384
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   aio write size = 16384
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3. Restart Samba</span>
</span></span><span style=display:flex><span>systemctl enable --now smb
</span></span></code></pre></div><h3 id=verification>Verification</h3><p>Run <code>lsblk</code> to confirm the mount and check the service status.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lsblk
</span></span><span style=display:flex><span>systemctl status transmission-daemon
</span></span></code></pre></div><h3 id=step-5-selinux--permissions-fedora-specific>Step 5: SELinux & Permissions (Fedora Specific)</h3><p>Fedora enforces strict security. By default, it will block Samba from accessing <code>/srv</code>. We must update the security context and ensure user permissions allow directory traversal.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 1. Allow Samba to read/write the torrent directory in SELinux</span>
</span></span><span style=display:flex><span><span style=color:#75715e># (Requires policycoreutils-python-utils)</span>
</span></span><span style=display:flex><span>semanage fcontext -a -t samba_share_t <span style=color:#e6db74>&#34;/srv/TORRENT(/.*)?&#34;</span>
</span></span><span style=display:flex><span>restorecon -R -v /srv/TORRENT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2. Add your user to the transmission group for easy access</span>
</span></span><span style=display:flex><span>usermod -a -G transmission think
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3. Create a Samba password for your user (required for private shares)</span>
</span></span><span style=display:flex><span>smbpasswd -a think
</span></span></code></pre></div><h3 id=step-6-migrating-old-data-optional>Step 6: Migrating Old Data (Optional)</h3><p>If you are moving data from an old drive (e.g., <code>/srv/TORRENT_OLD</code>), <strong>do not use <code>cp</code></strong>.
Standard copy commands do not pre-allocate space, which will immediately fragment your fresh drive.</p><p>Instead, use <code>rsync</code> with the <code>--preallocate</code> flag to ensure large video files are written contiguously.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 1. Stop Transmission to release file locks</span>
</span></span><span style=display:flex><span>systemctl stop transmission-daemon
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2. Copy with Preallocation</span>
</span></span><span style=display:flex><span><span style=color:#75715e># -a: Archive mode (preserves permissions/times)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># -h: Human readable numbers</span>
</span></span><span style=display:flex><span><span style=color:#75715e># -W: Whole file (faster for local copies)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># --preallocate: The magic flag to prevent fragmentation</span>
</span></span><span style=display:flex><span><span style=color:#75715e># --info=progress2: Shows a single total progress bar</span>
</span></span><span style=display:flex><span>rsync -ahW --info<span style=color:#f92672>=</span>progress2 --preallocate /srv/TORRENT_OLD/ /srv/TORRENT/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3. Restart Transmission</span>
</span></span><span style=display:flex><span>systemctl start transmission-daemon
</span></span></code></pre></div></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=https://blog.vorona.me/tags/linux/>linux</a></li><li><a href=https://blog.vorona.me/tags/fedora/>fedora</a></li><li><a href=https://blog.vorona.me/tags/storage/>storage</a></li><li><a href=https://blog.vorona.me/tags/transmission/>transmission</a></li><li><a href=https://blog.vorona.me/tags/samba/>samba</a></li></ul></nav></div></div></div></article></main><footer><div style=display:flex><a class=soc href rel=me title=github><svg class="feather"><use href="https://blog.vorona.me/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#%25!s%28%3cnil%3e%29"/></svg></a><a class=border></a><a class=soc href rel=me title=email><svg class="feather"><use href="https://blog.vorona.me/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#%25!s%28%3cnil%3e%29"/></svg></a><a class=border></a></div><div class=footer-info>2026 Copyright © 2020–2022, Anatolii Vorona; all rights reserved. | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script async src="https://www.googletagmanager.com/gtag/js?id=G-4NT8K1F5CV"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4NT8K1F5CV")}</script></div></body></html>